<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<title>Hotpot Hero</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;background:#1a1a2e}
body{display:flex;justify-content:center;align-items:center;height:100dvh;overflow:hidden;font-family:'Trebuchet MS',Verdana,sans-serif;touch-action:none;user-select:none}
canvas{display:block}
</style>
</head>
<body>
<canvas id="c"></canvas>
<script>
var C=document.getElementById("c"),X=C.getContext("2d"),BW=960,BH=540,W=BW,H=BH;C.width=W,C.height=H;var ac,F="Trebuchet MS,Verdana,sans-serif",E_POT="üç≤",E_HEART="‚ù§Ô∏è",E_BHEART="üñ§",E_TIMER="‚è±Ô∏è",E_FIRE="üî•",E_MONEY="üí∞",E_CLIP="üìã",E_PLATE="üçΩÔ∏è",E_TRASH="üóëÔ∏è",E_SAKE="üç∂",E_CART="üõí",E_WARN="‚ö†Ô∏è",E_BOOK="üìñ",E_PARTY="üéâ",E_CHOP="ü•¢",E_PHONE="üì±",E_DOG="üêï",E_STAR="‚≠ê",E_CHECK="‚úî",E_PLAY="‚ñ∂",E_DOWN="‚ñº",E_ZAP="‚ö°",E_TURN="üîÑ",E_TURT="üê¢";function ia(){ac=ac||new(window.AudioContext||window.webkitAudioContext)}function S(t,e,l,o){if(l=l||"sine",o=o||.12,ac)try{var i=ac.createOscillator(),a=ac.createGain();i.type=l,i.frequency.value=t,a.gain.setValueAtTime(o,ac.currentTime),a.gain.exponentialRampToValueAtTime(.001,ac.currentTime+e),i.connect(a),a.connect(ac.destination),i.start(),i.stop(ac.currentTime+e)}catch(t){}}function sPlop(){S(300,.08),S(200,.06)}function sSplash(){S(150,.15,"triangle"),S(100,.1)}function sDing(){S(800,.1,"sine",.18),S(1200,.15,"sine",.12),setTimeout(function(){S(1600,.2,"sine",.1)},80)}function sBuzz(){S(100,.3,"sawtooth",.12),S(80,.25,"square",.08)}function sTick(){S(600,.05,"square",.08),S(900,.05,"square",.06)}function sWhomp(){S(200,.4,"sine",.15),setTimeout(function(){S(100,.3,"sine",.1)},100)}function sBark(){S(400,.06,"square",.15),setTimeout(function(){S(350,.08,"square",.12)},70),setTimeout(function(){S(300,.05,"square",.1)},140)}function sBuy(){S(1200,.05,"sine",.15),setTimeout(function(){S(2400,.06,"sine",.12)},60),setTimeout(function(){S(3200,.08,"sine",.1)},120)}function sCoin(){S(1e3,.1,"sine",.2),setTimeout(function(){S(1500,.12,"sine",.18)},50),setTimeout(function(){S(2e3,.08,"sine",.15),S(1200,.15,"triangle",.1)},100),setTimeout(function(){S(2400,.15,"sine",.12)},160),setTimeout(function(){S(3e3,.1,"sine",.08)},220)}var mp=!1;function mOn(){ac&&!mp&&(mp=!0,mLoop())}function mLoop(){mp&&ac&&([262,294,330,349,392,349,330,294].forEach(function(t,e){setTimeout(function(){mp&&S(t,.35,"sine",.04)},280*e)}),[131,165,175,131].forEach(function(t,e){setTimeout(function(){mp&&S(t,.5,"triangle",.03)},560*e)}),setTimeout(function(){mp&&mLoop()},2240))}function mOff(){mp=!1}var wp2=!1;function wOn(){ac&&!wp2&&(wp2=!0,wLoop())}function wLoop(){wp2&&ac&&([392,440,494,523,587,659,698,784].forEach(function(t,e){setTimeout(function(){wp2&&S(t,.3,"sine",.06)},200*e)}),[262,330,392,523].forEach(function(t,e){setTimeout(function(){wp2&&S(t,.5,"triangle",.04)},400*e)}),[784,880,988,1047,988,880,784,659].forEach(function(t,e){setTimeout(function(){wp2&&S(t,.15,"sine",.03)},200*e+1600)}),setTimeout(function(){wp2&&S(1047,.2,"sine",.05)},800),setTimeout(function(){wp2&&wLoop()},3200))}function wOff(){wp2=!1}var IG=[{id:"bf",e:"ü•©",c:"#c0392b"},{id:"sh",e:"ü¶ê",c:"#e67e22"},{id:"mu",e:"üçÑ",c:"#8e6f47"},{id:"bk",e:"ü•¨",c:"#27ae60"},{id:"nd",e:"üçú",c:"#f1c40f"},{id:"ch",e:"üå∂Ô∏è",c:"#e74c3c"},{id:"ms",e:"ü¶™",c:"#5a7a8a"},{id:"tf",e:"üç•",c:"#f5c0c8"},{id:"cn",e:"üåΩ",c:"#f0c040"},{id:"fb",e:"üêü",c:"#4a9ae0"},{id:"eg",e:"ü•ö",c:"#f5eedc"},{id:"en",e:"üç¢",c:"#d4a860"}],BR=[{n:"Tomato",c:"#e74c3c",c2:"#c0392b",e:"üçÖ"},{n:"Pork Bone",c:"#f0dcc0",c2:"#d4bc98",e:"ü¶¥"},{n:"Miso",c:"#d49a40",c2:"#b07e28",e:"ü´ò"},{n:"Spicy Mala",c:"#ff3300",c2:"#cc2200",e:"üå∂Ô∏è"},{n:"Mushroom",c:"#7a6545",c2:"#5c4a30",e:"üçÑ"},{n:"Herbal",c:"#3a6a3a",c2:"#2a5a2a",e:"üåø"}],ON=[["Quick Pot","Light Dip","Snack Pot"],["House Special","Combo Pot","Triple"],["Feast Bowl","Grand Pot","Royal Hot"],["Emperor Pot","Dragon Pot","Legend"]],GOAL=300,BYY=200,BHTT=62,hlp=!1,G={st:"MENU",$$:0,hp:3,sh:1,sT:30,sR:30,cap:2,bs:1,xhp:0,slw:0,pLv:0,bLv:0,wb:!1,au:!1,pt:[{it:[],br:0}],np:1,sp:0,bi:0,ord:[],blt:[],pa:[],pb:[],ft:[],ps:0,cmb:0,se:0,oT:0,oI:3.5,bT:0,sf:0,sc:"",sk:0,ga:[],dog:null,dT:0,dC:10,mba:[0,0,0,0,0,0],hb:-1,wSz:1,wSp:0,wTr:[],glw:!1};function aFt(t,e,l,o){var i=W/2<t?-1:1;G.ft.push({x:t+40*i,y:e-10,t:l,c:o,l:60,ml:60,vy:-2,vx:.4*i})}function goWin(){G.st="WIN",G.wSz=1,G.wSp=0,G.wTr=[],G.glw||(G.$$=2*G.$$),mOff(),wOn()}function aP(t,e,l,o,i,a){o=o||5,i=i||3,a=a||30;for(var n=0;n<o;n++){var r=Math.random()*Math.PI*2;G.pa.push({x:t,y:e,vx:Math.cos(r)*i*(1+Math.random()),vy:Math.sin(r)*i*(1+Math.random())-2,l:a,ml:a,r:2+3*Math.random(),c:l})}}function aSt(t,e){for(var l=0;l<2;l++)G.pa.push({x:t-12+24*Math.random(),y:e,vx:.8*(Math.random()-.5),vy:-1-1.5*Math.random(),l:40,ml:55,r:3+3*Math.random(),c:"rgba(255,255,255,0.35)",sm:1})}function aCn(t,e){for(var l=0;l<6;l++){var o=Math.random()*Math.PI*2;G.pa.push({x:t,y:e,vx:3.5*Math.cos(o),vy:3.5*Math.sin(o)-2.5,l:35,ml:35,r:4,c:"#f1c40f",cn:1})}}function bMx(){return 3<=G.sh}function gOrd(){var t=G.cap,e=Math.min(t,2);3<=t&&(e=Math.min(t,2<=G.sh?3:2)),4<=t&&3<=G.sh&&(e=Math.min(t,4)),5<=t&&4<=G.sh&&(e=5),G.sR/G.sT<.35&&e<t&&(e=Math.min(e+1,t));for(var l=2+Math.floor(Math.random()*(e-2+1)),o=[],i=0;i<l;i++)o.push(IG[Math.floor(Math.random()*IG.length)].id);o.sort();var a=Math.min(l-2,3),t=ON[a][Math.floor(Math.random()*ON[a].length)],e=([0,0,18,38,75,128][l]||18)*(1+.15*G.sh)|0,a=Math.max(8,14+2.5*l-.6*G.sh);return{nm:t,it:o,pay:e,tmr:a,mt:a,fl:10,br:bMx()?Math.floor(Math.random()*BR.length):G.bi}}function spOrd(){var t=G.sh<=2?2:G.sh<=4?3:4;G.ord.length<t&&(G.ord.push(gOrd()),sTick())}function gPCX(t){return 265+(W-265-15)/(G.np+1)*(t+1)}function sAdd(t,e,l,o){var i=G.pt[G.sp];if(!i||i.it.length>=G.cap)return!1;if(1<G.np){for(var a=[].concat(i.it.map(function(t){return t.id}),[t]).sort(),n=!1,r=0;r<G.ord.length;r++){var f=G.ord[r];if(f.br===i.br){f=f.it.slice().sort();if(a.length<=f.length){for(var s=[].concat(f),X=!0,c=0;c<a.length;c++){var h=s.indexOf(a[c]);if(!(0<=h)){X=!1;break}s.splice(h,1)}if(X){n=!0;break}}}}if(!n)for(var d=0;d<G.np;d++)if(d!==G.sp){var p=G.pt[d];if(!(p.it.length>=G.cap))for(var x=[].concat(p.it.map(function(t){return t.id}),[t]).sort(),b=0;b<G.ord.length;b++){var u=G.ord[b];if(u.br===p.br){u=u.it.slice().sort();if(x.length<=u.length){for(var g=[].concat(u),T=!0,y=0;y<x.length;y++){var S=g.indexOf(x[y]);if(!(0<=S)){T=!1;break}g.splice(S,1)}if(T)return p.it.push({id:e.id,e:e.e,c:e.c}),G.ga.push({x:l,y:o,tx:gPCX(d),ty:375,t:0,e:e.e}),!0}}}}}return i.it.push({id:e.id,e:e.e,c:e.c}),G.ga.push({x:l,y:o,tx:gPCX(G.sp),ty:375,t:0,e:e.e}),!0}function serve(t){var e=G.pt[t];if(e&&0!==e.it.length){for(var l=e.it.map(function(t){return t.id}).sort(),o=0;o<G.ord.length;o++){var i=G.ord[o],a=i.it.slice().sort();if(e.br===i.br&&l.length===a.length&&l.every(function(t,e){return t===a[e]})){var n=0|i.pay;G.$$+=n,G.se+=n,G.cmb++;i=gPCX(t);return e.it=[],G.ord.splice(o,1),G.sf=15,G.sc="#2ecc71",aCn(i,350),aP(i,360,"#2ecc71",8,4),aFt(i,330,"+$"+n,"#2ecc71"),sDing(),sCoin(),void(G.$$>=GOAL&&goWin())}}G.sf=15,G.sc="#e74c3c",G.sk=10,G.cmb=0,sBuzz()}}function clrPot(t){var e=G.pt[t];e&&0<e.it.length&&(aP(gPCX(t),370,"#aaa",5,3),sWhomp(),e.it=[])}function spBI(){var t=IG[Math.floor(Math.random()*IG.length)],e=G.wb&&Math.random()<.45?1:0;G.blt.push({id:t.id,e:t.e,c:t.c,x:W+30,b:Math.random()*Math.PI*2,ln:e})}function spDog(){var e,t,l,o=G.blt.filter(function(t){return!t.ln});o.length<1||(e=[],G.ord.forEach(function(t){t.it.forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),t=null,0<e.length&&(0<(l=o.filter(function(t){return 0<=e.indexOf(t.id)})).length&&(t=l[Math.floor(Math.random()*l.length)])),t=t||o[Math.floor(Math.random()*o.length)],G.dog={x:-40,y:BYY-18,tx:t.x,ti:t.id,s:"run",t:0,st:"",f:0,bp:0},sBark())}function uDog(){var l,o,i;G.dog&&((l=G.dog).bp+=.2,"run"===l.s?l.x<l.tx-5?(l.x+=4,l.f=0):(l.s="grab",l.t=25,o=-1,i=999,G.blt.forEach(function(t,e){t.ln||(t=Math.abs(t.x-l.x)+(t.id===l.ti?-30:0))<i&&(i=t,o=e)}),0<=o&&Math.abs(G.blt[o].x-l.x)<80?(l.st=G.blt[o].e,G.blt.splice(o,1),aP(l.x,l.y+10,"#8b5a2b",4,3,20)):l.s="flee"):"grab"===l.s?(l.t--,l.t<=0&&(l.s="flee")):"flee"===l.s&&(l.x-=5,l.f=1,l.x<-60&&(G.dog=null)))}function iPots(){G.pt=[];for(var t=0;t<G.np;t++)G.pt.push({it:[],br:G.bi});G.sp=0}function stSh(){G.st="PLAY",G.sR=G.sT,G.ord=[],G.blt=[],G.se=0,G.cmb=0,G.oT=1,G.bT=0,G.pa=[],G.pb=[],G.ft=[],G.dog=null,G.dT=.5*G.dC,G.np=1+G.bLv,G.cap=2+G.pLv,G.hp=3+G.xhp,iPots(),mOn();for(var t=0;t<7;t++)spBI(),G.blt[G.blt.length-1].x=50+65*t,G.blt[G.blt.length-1].ln=0;if(G.wb)for(var e=0;e<4;e++){spBI();var l=G.blt[G.blt.length-1];l.x=80+80*e,l.ln=1}}function stGm(){G.$$=0,G.hp=3,G.sh=1,G.cap=2,G.bs=1,G.xhp=0,G.slw=0,G.pLv=0,G.bLv=0,G.wb=!1,G.au=!1,G.np=1,wOff(),stSh()}var UPG=[{id:"pot",n:"Bigger Pot",d:"",co:25,e:E_POT,m:1,mx:3},{id:"slw",n:"Slow Belt",d:"",co:20,e:E_TURT,m:1,mx:3},{id:"bowl",n:"+1 Pot",d:"",co:35,e:E_POT,m:1,mx:3},{id:"life",n:"Extra Life",d:"+1 starting life",co:30,e:E_HEART,m:0,mx:1},{id:"dbl",n:"Wide Belt",d:"2 rows!",co:60,e:E_ZAP,m:0,mx:1},{id:"auto",n:"Auto Serve",d:"Auto-complete orders!",co:50,e:E_TURN,m:0,mx:1}],sUp=[];function iShop(){sUp=UPG.map(function(t){var e={id:t.id,n:t.n,d:t.d,co:t.co,e:t.e,m:t.m,mx:t.mx,bo:!1};return"pot"===t.id&&(e.co=25+15*G.pLv,e.n="Bigger Pot ("+(3+G.pLv)+")",e.d=G.cap+" > "+(G.cap+1)+" cap",3<=G.pLv&&(e.bo=!0)),"slw"===t.id&&(e.co=20+12*G.slw,e.n="Slow Belt ("+(G.slw+1)+"0%)",e.d="Slower belt + more food!",3<=G.slw&&(e.bo=!0)),"bowl"===t.id&&(e.co=35+20*G.bLv,e.n="+1 Pot (>"+(G.np+1)+")",e.d="More pots!",3<=G.bLv&&(e.bo=!0)),"life"===t.id&&0<G.xhp&&(e.bo=!0),"dbl"===t.id&&G.wb&&(e.bo=!0),"auto"===t.id&&G.au&&(e.bo=!0),e})}function bUp(t){t.bo||G.$$<t.co||(G.$$-=t.co,t.bo=!0,sBuy(),"pot"===t.id&&(G.pLv++,G.cap=2+G.pLv),"slw"===t.id&&G.slw++,"bowl"===t.id&&(G.bLv++,G.np=1+G.bLv),"life"===t.id&&(G.xhp=1,G.hp++),"dbl"===t.id&&(G.wb=!0),"auto"===t.id&&(G.au=!0),iShop())}var ttx=0,tty=0,tp=!1,sTap=0,sLT=0;function oTap(t){var e,l;t.preventDefault(),isPt||(ia(),e=C.getBoundingClientRect(),l=(t.touches?t.touches[0]:t).clientX,t=(t.touches?t.touches[0]:t).clientY,ttx=(l-e.left)*(BW/e.width),tty=(t-e.top)*(BH/e.height),tp=!0)}C.addEventListener("mousedown",oTap),C.addEventListener("touchstart",oTap);var dt=1/60,T=0;function update(){if(G.pa=G.pa.filter(function(t){return t.x+=t.vx,t.y+=t.vy,t.sm||t.cn||(t.vy+=.1),t.l--,0<t.l}),G.ft=G.ft.filter(function(t){return t.y+=t.vy,t.x+=t.vx,t.vy*=.97,t.l--,0<t.l}),0<G.sk&&G.sk--,0<G.sf&&G.sf--,G.ps+=.03,"MENU"!==G.st){if("OVER"===G.st)return tp&&(G.st="MENU",wOff()),void mOff();if("WIN"!==G.st)if("SHOP"!==G.st){if(G.sR-=dt,G.sR<=0)return G.st="SHOP",iShop(),mOff(),void(G.$$>=GOAL&&goWin());if(G.oT-=dt,G.oT<=0&&(spOrd(),e=G.sR/G.sT,t=Math.max(2.5,G.oI-.3*G.sh),e=.5<e?1:.25<e?.5:.25,G.oT=t*e+1.5*Math.random()),G.ord.forEach(function(t){t.tmr-=dt,0<t.fl&&t.fl--}),G.ord.filter(function(t){return t.tmr<=0}).forEach(function(){G.hp--,G.cmb=0,G.sk=12,sWhomp(),aP(130,55,"#e74c3c",6,4)}),G.ord=G.ord.filter(function(t){return 0<t.tmr}),G.hp<=0)return G.st="OVER",void mOff();var t=1-.1*G.slw,e=.2+.3*(1-G.sR/G.sT)+1,l=1.2*G.bs*t*(1+.07*G.sh)*e;if(G.bT-=dt,G.bT<=0){var o=[];G.ord.forEach(function(t){t.it.forEach(function(t){o.indexOf(t)<0&&o.push(t)})});var i=G.blt.map(function(t){return t.id}),e=o.filter(function(t){return i.indexOf(t)<0});if(0<e.length&&Math.random()<.5){for(var a=e[Math.floor(Math.random()*e.length)],n=null,r=0;r<IG.length;r++)if(IG[r].id===a){n=IG[r];break}var f=G.wb&&Math.random()<.4?1:0;G.blt.push({id:n.id,e:n.e,c:n.c,x:W+30,b:Math.random()*Math.PI*2,ln:f})}else spBI();G.bT=1.1/G.bs/(1+.2*G.slw)}if(G.blt.forEach(function(t){t.x-=l*(t.ln?.85:1),t.b+=.04}),G.blt=G.blt.filter(function(t){return-40<t.x}),G.dT-=dt,G.dT<=0&&!G.dog&&2<=G.sh&&(spDog(),G.dT=G.dC+8*Math.random()),uDog(),G.ga=G.ga.filter(function(t){return t.t+=.08,t.t<1}),G.pt[G.sp]&&0<G.pt[G.sp].it.length&&Math.random()<.1&&(f=gPCX(G.sp),G.pb.push({x:f-30+60*Math.random(),y:380,r:2+3*Math.random(),vy:-1-Math.random(),l:25+15*Math.random(),o:1})),G.pb=G.pb.filter(function(t){return t.y+=t.vy,t.l--,t.o=t.l/40,0<t.l}),G.pt[G.sp]&&0<G.pt[G.sp].it.length&&Math.random()<.05&&aSt(gPCX(G.sp),340),G.au)for(var s=0;s<G.np;s++){var X=G.pt[s];if(X&&!(X.it.length<2))for(var c=X.it.map(function(t){return t.id}).sort(),h=0;h<G.ord.length;h++){var d=G.ord[h],p=d.it.slice().sort();if(X.br===d.br&&c.length===p.length&&c.every(function(t,e){return t===p[e]})){var x=0|d.pay;G.$$+=x,G.se+=x,G.cmb++;d=gPCX(s);if(X.it=[],G.ord.splice(h,1),G.sf=15,G.sc="#2ecc71",aCn(d,350),aP(d,360,"#2ecc71",8,4),aFt(d,330,"+$"+x,"#2ecc71"),sDing(),sCoin(),G.$$>=GOAL)return void goWin();break}}}if(tp)if(15<=ttx&&ttx<135&&H-50<=tty&&tty<=H-10)serve(G.sp);else if(145<=ttx&&ttx<225&&H-50<=tty&&tty<=H-10)clrPot(G.sp);else{if(1<G.np)for(var b=0;b<G.np;b++){var u=240+60*b;if(u<ttx&&ttx<54+u&&H-50<=tty&&tty<=H-10)return G.sp=b,void sPlop()}if(G.dog&&"flee"!==G.dog.s&&Math.abs(ttx-G.dog.x)<35&&Math.abs(tty-G.dog.y)<35){if(G.dog.st){for(var g=null,T=0;T<IG.length;T++)if(IG[T].e===G.dog.st){g=IG[T];break}g&&G.blt.push({id:g.id,e:g.e,c:g.c,x:G.dog.x,b:Math.random()*Math.PI*2,ln:0}),G.dog.st=""}return G.dog.s="flee",sBark(),void aP(G.dog.x,G.dog.y,"#f1c40f",5,4,20)}if(bMx()){for(var y=Math.floor((BYY-80)/Math.max(1,G.ord.length))-3,S=Math.min(38,y),v=0;v<G.ord.length;v++){var m=70+v*(S+2);if(12<=ttx&&ttx<=250&&m<=tty&&tty<=m+S){m=G.pt[G.sp];return void(m&&(m.br=G.ord[v].br,sPlop()))}}var y=BYY+(G.wb?BHTT+26:BHTT)+6,M=y,y=H-y-55;if(6<=ttx&&ttx<=256&&M<=tty&&tty<=M+y)for(var P=(y-30-16-6)/2,E=0;E<BR.length;E++){var w=14+E%3*(218/3+8),A=M+28+8+Math.floor(E/3)*(6+P);if(w<=ttx&&ttx<=w+218/3&&A<=tty&&tty<=A+P){A=G.pt[G.sp];return void(A&&(A.br=E,sPlop()))}}}for(var B=0;B<G.np;B++){var C=gPCX(B);if(Math.abs(ttx-C)<50&&300<tty&&tty<440)return G.sp=B,void sPlop()}for(var R=G.blt.length-1;0<=R;R--){var F=G.blt[R],I=bIY(F);if(Math.abs(ttx-F.x)<25&&Math.abs(tty-I)<25){for(var O=null,$=0;$<IG.length;$++)if(IG[$].id===F.id){O=IG[$];break}O&&sAdd(F.id,{id:O.id,e:O.e,c:O.c},F.x,I)&&(G.blt.splice(R,1),sPlop(),sSplash(),aP(F.x,I,O.c,3,2,12));break}}}}else tp&&(sUp.forEach(function(t,e){var l=W/2-170,e=155+47*e;l<=ttx&&ttx<=340+l&&e<=tty&&tty<=42+e&&bUp(t)}),W/2-100<=ttx&&ttx<=W/2+100&&430<=tty&&tty<=470&&(G.sh++,stSh()));else if(G.wTr=G.wTr.filter(function(t){return t.x+=t.vx,t.y+=t.vy,t.vy+=.15,t.l--,0<t.l}),0<G.wSp&&(G.wSp-=.02),tp){for(var _=W/2-203,L=0;L<3;L++){var Y=_+138*L;if(Y<=ttx&&ttx<=130+Y&&390<=tty&&tty<=422&&25<=G.$$){if(G.$$-=25,sCoin(),0===L&&(G.wSz=Math.min(G.wSz+.35,3),aP(W/2,240,"#f39c12",8,4,30)),1===L&&(G.wSp=4*Math.PI,aP(W/2,240,"#9b59b6",6,3,25)),2===L){for(var k=0;k<5;k++)G.wTr.push({x:W/2-60+120*Math.random(),y:300,vx:4*(Math.random()-.5),vy:-5-4*Math.random(),l:60+30*Math.random(),e:["üçñ","ü¶¥","ü•©","üçó"][Math.floor(4*Math.random())]});sBark(),aP(W/2,260,"#e67e22",6,3)}return}}W/2-90<=ttx&&ttx<=W/2+90&&440<=tty&&tty<=474&&(G.st="MENU",G.glw=!1,wOff())}}else{for(var D=0;D<6;D++){var N=D===G.bi?1:0;G.mba[D]+=.08*(N-G.mba[D])}if(tp){if(W-52<=ttx&&ttx<=W-14&&8<=tty&&tty<=46)return hlp=!hlp,void sPlop();if(hlp){var z=W-340-16;return ttx<z||340+z<ttx||tty<48||388<tty?void(hlp=!1):void 0}for(var y=138*BR.length-10,q=(W-y)/2,U=0;U<BR.length;U++){var V=q+138*U;V<ttx&&ttx<128+V&&175<tty&&tty<300&&(G.bi=U,sPlop())}W/2-90<ttx&&ttx<W/2+90&&380<tty&&tty<430&&stGm();z=Date.now()/30%1100-60;Math.abs(ttx-z)<35&&Math.abs(tty-375)<35&&((y=Date.now())-sLT<500?2<=++sTap&&(G.$$=420,G.sh=0,G.glw=!0,G.sk=20,goWin(),sBark(),sBark(),aP(z,375,"#e74c3c",12,6,40),sTap=0):sTap=0,sLT=y)}Math.random()<.06&&aSt(W/2,310)}}function render(){var t=0<G.sk?5*(Math.random()-.5):0,e=0<G.sk?5*(Math.random()-.5):0;X.save(),X.translate(t,e);e=X.createLinearGradient(0,0,0,H);e.addColorStop(0,"#2c1810"),e.addColorStop(.5,"#3d2317"),e.addColorStop(1,"#1a0f0a"),X.fillStyle=e,X.fillRect(0,0,W,H),X.globalAlpha=.02;for(var l=0;l<48;l++)for(var o=0;o<28;o++)(l+o)%2==0&&(X.fillStyle="#fff",X.fillRect(20*l,20*o,20,20));return X.globalAlpha=1,("MENU"===G.st?rMenu:"OVER"===G.st?rGO:"WIN"===G.st?rWin:"SHOP"===G.st?rShop:rPlay)(),void X.restore()}function dPot(t,e,l,o,i,a){o=o||1,a=a||18,X.save(),X.translate(t,e),X.scale(o,o);o=BR[l]||BR[0];X.fillStyle="rgba(0,0,0,.12)",X.beginPath(),X.ellipse(0,35,55,12,0,0,2*Math.PI),X.fill(),X.fillStyle="#8b1a1a",X.beginPath(),X.moveTo(-62,-8),X.quadraticCurveTo(-66,32,-45,35),X.lineTo(45,35),X.quadraticCurveTo(66,32,62,-8),X.closePath(),X.fill(),X.fillStyle="#c0392b",X.beginPath(),X.ellipse(0,-10,62,16,0,0,2*Math.PI),X.fill();l=X.createRadialGradient(-6,-6,3,0,-8,55);l.addColorStop(0,o.c),l.addColorStop(1,o.c2),X.fillStyle=l,X.beginPath(),X.ellipse(0,-8,55,13,0,0,2*Math.PI),X.fill(),X.save(),X.beginPath(),X.ellipse(0,-8,55,13,0,0,2*Math.PI),X.clip(),X.strokeStyle="rgba(255,255,255,.08)",X.lineWidth=.7;for(var n=0;n<2;n++){X.beginPath();for(var r=-55;r<=55;r+=3){var f=5*n-11+2*Math.sin(3*T+.1*r+n);-55===r?X.moveTo(r,f):X.lineTo(r,f)}X.stroke()}X.restore(),X.strokeStyle="#777",X.lineWidth=3.5,X.lineCap="round",X.beginPath(),X.moveTo(-62,0),X.lineTo(-76,0),X.stroke(),X.beginPath(),X.moveTo(62,0),X.lineTo(76,0),X.stroke();for(var s=0;s<3;s++){var c=7*s-7,h=-16-8*Math.abs(Math.sin(2*T+s))-4*s,d=.12-.03*s;0<d&&(X.globalAlpha=d,X.fillStyle="#fff",X.beginPath(),X.arc(c+3*Math.sin(T+s),h,2,0,2*Math.PI),X.fill())}X.globalAlpha=1,i&&0<i.length&&i.forEach(function(t,e){e=G.ps+e*(2*Math.PI/i.length);X.font=a+"px serif",X.textAlign="center",X.fillText(t.e||"?",24*Math.cos(e),5*Math.sin(e)-8+5)}),X.restore()}function bIY(t){if(!G.wb)return BYY+BHTT/2+2*Math.sin(t.b);var e=(BHTT+26)/2;return BYY+(t.ln?e:0)+e/2+2*Math.sin(t.b)}function rBelt(){var t=G.wb?BHTT+26:BHTT,e=X.createLinearGradient(0,BYY,0,BYY+t);e.addColorStop(0,"#3a2518"),e.addColorStop(.3,"#4d3020"),e.addColorStop(.7,"#5c3d2e"),e.addColorStop(1,"#3a2518"),X.fillStyle=e,X.fillRect(0,BYY,W,t);var l=Date.now()/20*G.bs%28;X.strokeStyle="rgba(255,255,255,.04)";for(var o=-(X.lineWidth=1);o<W/28+2;o++){var i=28*o-l;X.beginPath(),X.moveTo(i,BYY),X.lineTo(i,BYY+t),X.stroke()}X.fillStyle="#555",X.fillRect(0,BYY,W,2),X.fillRect(0,BYY+t-2,W,2),G.wb&&(X.strokeStyle="rgba(255,255,255,.06)",X.lineWidth=1,X.setLineDash([6,6]),X.beginPath(),X.moveTo(0,BYY+t/2),X.lineTo(W,BYY+t/2),X.stroke(),X.setLineDash([])),G.blt.forEach(function(t){var e=bIY(t);X.save(),X.translate(t.x,e),X.fillStyle="rgba(0,0,0,.15)",X.beginPath(),X.ellipse(1,9,18,6,0,0,2*Math.PI),X.fill(),X.fillStyle="#f5f0e8",X.beginPath(),X.ellipse(0,1,19,11,0,0,2*Math.PI),X.fill(),X.strokeStyle="#ddd5c8",X.lineWidth=1.2,X.beginPath(),X.ellipse(0,1,19,11,0,0,2*Math.PI),X.stroke(),X.fillStyle="#faf7f2",X.beginPath(),X.ellipse(0,0,14,8,0,0,2*Math.PI),X.fill(),X.font="26px serif",X.textAlign="center",X.fillText(t.e,0,4),X.restore()})}var scottyImg=new Image;function dScotty(t,e,l,o){X.save(),X.translate(t,e-o),l&&X.scale(-1,1),X.drawImage(scottyImg,-24,-20,48,39),X.restore()}function rFt(){G.ft.forEach(function(t){var e=t.l/t.ml,l=1-e,l=l<.3?.6*Math.sin(l/.3*Math.PI):0;X.save(),X.translate(t.x,t.y),X.scale(1+.35*l,1+.35*l),X.globalAlpha=e<.3?e/.3:1,X.font="bold 20px "+F,X.textAlign="center",X.fillStyle="rgba(0,0,0,.5)",X.fillText(t.t,1,1),X.fillStyle=t.c,X.fillText(t.t,0,0),X.restore()}),X.globalAlpha=1}function rPlay(){rr(6,6,W-12,36,8,"rgba(0,0,0,.6)"),X.font="bold 14px "+F,X.textAlign="left",X.fillStyle="#f1c40f",X.fillText(E_MONEY+" $"+G.$$,18,30),X.fillStyle="#e74c3c";for(var t="",e=0;e<G.hp;e++)t+=E_HEART;for(var l=G.hp;l<3+G.xhp;l++)t+=E_BHEART;X.fillText(t,115,30),X.textAlign="center";var o=G.sR;X.fillStyle=o<8?"#e74c3c":o<18?"#f39c12":"#3498db",X.fillText(E_TIMER+" "+o.toFixed(1)+"s",W/2-20,30),3<=G.cmb&&(X.fillStyle="#f39c12",X.fillText(E_FIRE+"x"+G.cmb,W/2+40,30));var i=Math.min(G.$$/GOAL,1);rr(W-180,10,80,12,6,"rgba(0,0,0,.4)"),rr(W-180,10,80*i,12,6,"#f39c12"),X.font="bold 10px "+F,X.fillStyle="#fff",X.textAlign="center",X.fillText("$"+G.$$+" / "+GOAL,W-140,20),X.font="bold 15px "+F,X.fillStyle="#ccc",X.textAlign="right",X.fillText("Shift "+G.sh,W-14,28),X.textAlign="left",rr(6,48,250,BYY-54,8,"rgba(0,0,0,.25)"),X.font="bold 10px "+F,X.fillStyle="#ccc",X.fillText(E_CLIP+" ORDERS",14,64),G.ord.length||(X.font="11px "+F,X.fillStyle="#555",X.fillText("Waiting...",30,90));var o=Math.floor((BYY-80)/Math.max(1,G.ord.length))-3,r=Math.min(38,o);G.ord.forEach(function(t,e){var i=70+e*(r+2),a=r,e=t.tmr/t.mt<.3;rr(12,i,238,a,5,e?"rgba(231,76,60,.2)":"rgba(255,255,255,.05)"),0<t.fl&&(X.globalAlpha=t.fl/10*.2,X.fillStyle="#fff",rr(12,i,238,a,5,"rgba(255,255,255,.2)"),X.globalAlpha=1),dPot(26,i+a/2,t.br,.1,[]);e=BR[t.br];rr(39,1+i,5*e.n.length+18,11,3,"rgba("+hRgb(e.c)+",.25)"),X.font="bold 7px "+F,X.fillStyle=e.c,X.textAlign="left",X.fillText(e.e+" "+e.n,42,9+i),X.font="bold 7px "+F,X.fillStyle="#fff",X.fillText(t.nm,40,19+i);e=4<t.it.length?13:15;X.font=e+"px serif";var n=Math.min(22,Math.floor(183/t.it.length));t.it.forEach(function(t,e){for(var l=null,o=0;o<IG.length;o++)if(IG[o].id===t){l=IG[o];break}l&&X.fillText(l.e,42+e*n,i+a-2)});e=t.tmr/t.mt;rr(208,i+a-4,38,3,1,"rgba(0,0,0,.3)"),rr(208,i+a-4,38*e,3,1,.5<e?"#2ecc71":.25<e?"#f39c12":"#e74c3c"),X.font="bold 8px "+F,X.fillStyle="#f1c40f",X.textAlign="right",X.fillText("$"+t.pay,245,9+i),X.textAlign="left"}),X.font="8px "+F,X.fillStyle="rgba(255,255,255,.2)",X.textAlign="center",X.fillText("-- TAP TO GRAB --",W/2,BYY-4),X.textAlign="left",rBelt(),G.dog&&(i=G.dog,o=5*Math.abs(Math.sin(i.bp)),dScotty(i.x,i.y,i.f,o),i.st&&"run"!==i.s&&(X.font="14px serif",X.textAlign="center",X.fillText(i.st,i.x,i.y-28-o+2*Math.sin(Date.now()/150))),"run"===i.s&&(X.font="bold 11px "+F,X.fillStyle="#e74c3c",X.textAlign="center",X.fillText(E_WARN+" SCOTTY!",i.x,i.y-34-o)),"grab"===i.s&&(X.font="bold 10px "+F,X.fillStyle="#f39c12",X.textAlign="center",X.fillText("TAP TO SHOO!",i.x,i.y-34-o))),X.textAlign="left";var a=BYY+(G.wb?BHTT+26:BHTT)+6;rr(260,a,W-270,H-a-55,8,"rgba(0,0,0,.2)"),X.font="bold 10px "+F,X.fillStyle="#ccc",X.fillText(E_POT+" KITCHEN",272,a+14),bMx()&&(X.font="8px "+F,X.fillStyle="#888",X.fillText("Tap order or use broth panel",370,a+14));for(var n=G.np<=1?1.05:G.np<=2?.82:.65,f=0;f<G.np;f++){var s=gPCX(f),c=a+72,h=f===G.sp;h&&(X.strokeStyle="rgba(241,196,15,.3)",X.lineWidth=1.5,X.setLineDash([3,3]),d=62*n,X.beginPath(),X.ellipse(s,c+2,d,.55*d,0,0,2*Math.PI),X.stroke(),X.setLineDash([]));var d=.9<n?24:.7<n?20:16;dPot(s,c,G.pt[f].br,n,G.pt[f].it,d);d=BR[G.pt[f].br];X.font=h?"bold 10px "+F:"10px "+F,X.textAlign="center",X.fillStyle=h?"#f1c40f":"#777",X.fillText(h?E_DOWN+"Pot"+(f+1):"Pot"+(f+1),s,c-44*n),X.font="8px "+F,X.fillStyle=d.c,X.fillText(d.e+" "+d.n,s,c+42*n+10),X.font="9px "+F,X.fillStyle="#666",X.fillText(G.pt[f].it.length+"/"+G.cap,s,c+42*n+22),X.textAlign="left"}if(G.pb.forEach(function(t){X.globalAlpha=.3*t.o,X.fillStyle="#f5c563",X.beginPath(),X.arc(t.x,t.y,t.r,0,2*Math.PI),X.fill()}),X.globalAlpha=1,bMx()){var p=a,x=H-a-55;rr(6,p,250,x,8,"rgba(0,0,0,.25)"),X.font="bold 10px "+F,X.fillStyle="#f39c12",X.fillText(E_SAKE+" SELECT BROTH",14,p+16);for(var b=218/3,u=(x-30-16-6)/2,g=G.pt[G.sp]?G.pt[G.sp].br:-1,T=0;T<BR.length;T++){var y=14+T%3*(8+b),S=p+28+8+Math.floor(T/3)*(6+u),v=BR[T],m=T===g;rr(y,S,b,u,6,m?"rgba("+hRgb(v.c)+",.25)":"rgba(255,255,255,.04)"),m&&(X.strokeStyle=v.c,X.lineWidth=2,rrS(y,S,b,u,6)),X.font="16px serif",X.textAlign="center",X.fillText(v.e,y+b/2,S+u/2-2),X.font="bold 7px "+F,X.fillStyle=m?"#fff":v.c,X.fillText(v.n,y+b/2,S+u-4)}X.textAlign="left"}var M=H-48,x=G.pt[G.sp],x=x&&0<x.it.length;if(rr(15,M,118,36,10,x?"#27ae60":"rgba(255,255,255,.04)"),X.font="bold 13px "+F,X.textAlign="center",X.fillStyle=x?"#fff":"#444",X.fillText(E_PLATE+" SERVE",74,23+M),rr(145,M,75,36,10,"rgba(231,76,60,.2)"),X.font="bold 11px "+F,X.fillStyle="#e74c3c",X.fillText(E_TRASH+" Clear",182,23+M),1<G.np)for(var P=0;P<G.np;P++){var E=240+60*P,w=P===G.sp;rr(E,M,54,36,10,w?"rgba(241,196,15,.12)":"rgba(255,255,255,.03)"),w&&(X.strokeStyle="#f1c40f",X.lineWidth=1,rrS(E,M,54,36,10)),X.font=w?"bold 10px "+F:"10px "+F,X.fillStyle=w?"#f1c40f":"#666",X.fillText("Pot"+(P+1),27+E,23+M)}X.textAlign="left",X.font="9px "+F,X.fillStyle="#555",X.textAlign="right",X.fillText("+$"+G.se+" this shift",W-12,H-8),X.textAlign="left",G.ga.forEach(function(t){var e=1-(1-t.t)*(1-t.t);X.globalAlpha=1-.5*t.t,X.font="24px serif",X.textAlign="center",X.fillText(t.e,t.x+(t.tx-t.x)*e,t.y+(t.ty-t.y)*e+6),X.globalAlpha=1}),G.pa.forEach(function(t){X.globalAlpha=t.l/t.ml,X.fillStyle=t.c,X.beginPath(),X.arc(t.x,t.y,t.r,0,2*Math.PI),X.fill()}),X.globalAlpha=1,rFt(),0<G.sf&&(X.globalAlpha=G.sf/15*.12,X.fillStyle=G.sc,X.fillRect(0,0,W,H),X.globalAlpha=1)}function rHelp(){var t=W-340-16;X.fillStyle="rgba(0,0,0,.5)",X.fillRect(0,0,W,H),rr(t,48,340,310,12,"rgba(30,18,10,.95)"),X.strokeStyle="rgba(243,156,18,.25)",X.lineWidth=1,rrS(t,48,340,310,12);var e=170+t,l=76;X.textAlign="center",X.font="bold 16px "+F,X.fillStyle="#f39c12",X.fillText(E_BOOK+" How to Play",e,l),l+=22;for(var o=[["Tap ingredients on belt to add to pot"],["Match the order, then tap SERVE"],["Each order has a timer - don't let it expire!"],["Lose a life per expired order (3 lives)"],["Earn $"+GOAL+" total to win!"],["Shift 2+: Scotty Dog steals food - tap to shoo!"],["Shift 3+: Orders need specific broths"],["Buy upgrades between shifts"]],i=0;i<o.length;i++)X.textAlign="left",X.font="10px "+F,X.fillStyle="#d4b896",X.fillText(i+1+". "+o[i][0],18+t,l),l+=26;l+=8,X.textAlign="center",X.font="9px "+F,X.fillStyle="#777",X.fillText("Tap outside to close",e,l)}function rMenu(){X.textAlign="center",X.font="bold 44px "+F,X.fillStyle="#f39c12",X.shadowColor="#e74c3c",X.shadowBlur=18,X.fillText(E_POT+" Hotpot Hero",W/2,65),X.shadowBlur=0,X.font="16px "+F,X.fillStyle="#ddd",X.fillText("Run your hotpot restaurant!",W/2,92),rr(W-52,8,38,38,10,hlp?"rgba(243,156,18,.2)":"rgba(255,255,255,.06)"),X.font="bold 18px "+F,X.fillStyle=hlp?"#f39c12":"#aaa",X.textAlign="center",X.fillText("?",W-33,33),X.font="bold 13px "+F,X.fillStyle="#f5dfc0",X.fillText("Choose Your Starting Broth",W/2,130);for(var t=128,e=115,l=138*BR.length-10,o=(W-l)/2,i=0;i<BR.length;i++){var a=BR[i],n=o+138*i,r=i===G.bi,f=G.mba[i],s=7*f;X.save(),X.translate(64+n,205.5-s);f=1+.04*f;X.scale(f,f),rr(-64,-57.5,t,e,10,r?"rgba("+hRgb(a.c)+",.18)":"rgba(255,255,255,.04)"),r?(X.strokeStyle=a.c,X.lineWidth=2,X.shadowColor=a.c,X.shadowBlur=12,rrS(-64,-57.5,t,e,10),X.shadowBlur=0):(X.strokeStyle="rgba(255,255,255,.07)",X.lineWidth=1,rrS(-64,-57.5,t,e,10)),dPot(0,-6,i,.36,[]),X.font="bold 9px "+F,X.fillStyle=r?"#fff":a.c,X.textAlign="center",X.fillText(a.n,0,48),r&&(X.font="12px sans-serif",X.fillStyle="#2ecc71",X.fillText(E_CHECK,50,-43.5)),X.restore()}X.font="16px "+F,X.fillStyle="#f1c40f",X.fillText("Goal: Earn $"+GOAL+" to retire!",W/2,310),X.font="13px "+F,X.fillStyle="#aaa",X.fillText("Tap ingredients > Cook > Serve!",W/2,335),X.font="11px "+F,X.fillStyle="#777",X.fillText("Shift 1: Learn basics | Shift 2: Scotty Dog! "+E_DOG+" | Shift 3+: Multiple broths!",W/2,355),dScotty(Date.now()/30%1100-60,375,0,3*Math.abs(Math.sin(Date.now()/200)));l=.04*Math.sin(Date.now()/300)+.98;X.save(),X.translate(W/2,405),X.scale(l,l),rr(-90,-22,180,44,14,"#e74c3c"),X.font="bold 20px "+F,X.fillStyle="#fff",X.textAlign="center",X.fillText(E_PLAY+" START",0,7),X.restore(),G.pa.forEach(function(t){X.globalAlpha=t.l/t.ml*.4,X.fillStyle="#fff",X.beginPath(),X.arc(t.x,t.y,t.r,0,2*Math.PI),X.fill()}),X.globalAlpha=1,hlp&&rHelp()}function rShop(){X.textAlign="center",X.font="bold 26px "+F,X.fillStyle="#f39c12",X.fillText("Shift "+G.sh+" Complete!",W/2,38),X.font="16px "+F,X.fillStyle="#2ecc71",X.fillText("Earned: $"+G.se,W/2,62),X.font="13px "+F,X.fillStyle="#ddd",X.fillText("Total: $"+G.$$+" / $"+GOAL,W/2,85);var t=Math.min(G.$$/GOAL,1);rr(W/3,94,W/3,10,5,"rgba(255,255,255,.06)"),rr(W/3,94,W/3*t,10,5,"#f39c12");var e=G.sh+1;X.font="10px "+F,X.fillStyle="#aaa";t="Next: Shift "+e;t+=2===e?" -- Scotty Dog appears! "+E_DOG:3===e?" -- "+E_SAKE+" Multiple broths!":" -- Faster orders!",X.fillText(t,W/2,115),X.font="bold 14px "+F,X.fillStyle="#fff",X.fillText(E_CART+" Upgrades",W/2,135),X.font="9px "+F,X.fillStyle="#888",X.fillText("Pot: "+G.cap+" | Pots: "+G.np+" | Slow: "+G.slw+"0%"+(G.wb?" | Wide":"")+(G.au?" | Auto":""),W/2,150),sUp.forEach(function(t,e){var l=W/2-170,o=158+45*e,e=!t.bo&&G.$$>=t.co;if(rr(l,o,340,40,8,t.bo?"rgba(46,204,113,.1)":e?"rgba(255,255,255,.06)":"rgba(255,255,255,.02)"),e&&(X.strokeStyle="rgba(255,255,255,.08)",X.lineWidth=1,rrS(l,o,340,40,8)),X.font="18px serif",X.textAlign="left",X.fillText(t.e,10+l,26+o),X.font="bold 11px "+F,X.fillStyle=t.bo?"#2ecc71":"#fff",X.fillText(t.n,38+l,16+o),X.font="8px "+F,X.fillStyle="#aaa",X.fillText(t.d,38+l,30+o),X.textAlign="right",X.font="bold 10px "+F,X.fillStyle=t.bo?"#2ecc71":e?"#f1c40f":"#555",X.fillText(t.bo?E_CHECK+" MAX":"$"+t.co,340+l-12,24+o),t.m&&!t.bo)for(var i="pot"===t.id?G.pLv:"slw"===t.id?G.slw:G.bLv,a=0;a<3;a++)X.fillStyle=a<i?"#2ecc71":"#444",X.beginPath(),X.arc(340+l-50+10*a,34+o,3,0,2*Math.PI),X.fill();X.textAlign="left"}),dScotty(Date.now()/25%1100-60,435,0,3*Math.abs(Math.sin(Date.now()/180)));t=.02*Math.sin(3*T)+1;X.save(),X.translate(W/2,460),X.scale(t,t),rr(-100,-20,200,40,12,"#e74c3c"),X.font="bold 15px "+F,X.fillStyle="#fff",X.textAlign="center",X.fillText("NEXT SHIFT "+E_PLAY,0,5),X.restore()}function rGO(){X.textAlign="center",X.font="bold 34px "+F,X.fillStyle="#e74c3c",X.shadowColor="#c0392b",X.shadowBlur=12,X.fillText("GAME OVER",W/2,150),X.shadowBlur=0,X.font="16px "+F,X.fillStyle="#ddd",X.fillText("Too many missed orders!",W/2,185),X.font="bold 22px "+F,X.fillStyle="#f1c40f",X.fillText("Total: $"+G.$$,W/2,240),X.font="14px "+F,X.fillStyle="#aaa",X.fillText("Reached Shift "+G.sh,W/2,270),dScotty(W/2,310,0,0),X.font="10px "+F,X.fillStyle="#888",X.fillText("Even Scotty is sad...",W/2,340),rr(W/2-90,360,180,44,12,"#e74c3c"),X.font="bold 16px "+F,X.fillStyle="#fff",X.fillText("TRY AGAIN",W/2,388)}function rWin(){X.textAlign="center",Math.random()<.3&&aP(Math.random()*W,Math.random()*H*.4,["#f1c40f","#e74c3c","#2ecc71","#3498db","#9b59b6"][Math.floor(5*Math.random())],2,4,40),G.pa.forEach(function(t){X.globalAlpha=t.l/t.ml,X.fillStyle=t.c,X.beginPath(),X.arc(t.x,t.y,t.r,0,2*Math.PI),X.fill()}),X.globalAlpha=1;var t=.08+.04*Math.sin(2*T);X.globalAlpha=t,X.fillStyle="#f1c40f",X.fillRect(0,0,W,H),X.globalAlpha=1,G.glw&&Math.random()<.08&&(X.globalAlpha=.15,X.fillStyle=["#e74c3c","#00ff00","#0000ff"][Math.floor(3*Math.random())],a=Math.random()*H,X.fillRect(0,a,W,3+8*Math.random()),X.globalAlpha=1),X.font="bold 38px "+F,X.fillStyle="#f1c40f",X.shadowColor="#f39c12",X.shadowBlur=25,X.fillText(E_PARTY+" YOU WIN! "+E_PARTY,W/2,50),X.shadowBlur=0,G.glw?(n=.3<Math.sin(8*T),X.font="bold 16px "+F,X.fillStyle=n?"#e74c3c":"#f39c12",X.fillText("Wait... How did you win?? "+E_DOG,W/2,73),X.font="11px "+F,X.fillStyle="#e74c3c",X.fillText(E_WARN+" SECRET GLITCH DISCOVERED! Scotty hacked the system! "+E_WARN,W/2,91),X.font="10px "+F,X.fillStyle="#888",X.fillText("Enjoy your totally legitimate retirement fund...",W/2,106)):(X.font="16px "+F,X.fillStyle="#2ecc71",X.fillText("$"+G.$$+" earned -- Time to retire!",W/2,73),X.font="11px "+F,X.fillStyle="#f5dfc0",X.fillText(E_MONEY+" Smart investments during your shifts doubled your savings!",W/2,92),X.font="13px "+F,X.fillStyle="#ddd",X.fillText("Retired after "+G.sh+" shifts",W/2,110)),dPot(120,210,G.bi,1.7,IG.slice(0,6).map(function(t){return{e:t.e}}),16),dPot(W-120,210,G.bi,1.7,IG.slice(6).map(function(t){return{e:t.e}}),16);for(var e=0;e<6;e++){var l=[120,W-120][e<3?0:1],o=145-22*Math.abs(Math.sin(2*T+e));X.globalAlpha=.12,X.fillStyle="#fff",X.beginPath(),X.arc(l-12+5*e+5*Math.sin(T+e),o,3.5,0,2*Math.PI),X.fill()}X.globalAlpha=1;for(var i=W/2,t=28*G.wSz,a=20*G.wSz,n=16+6*G.wSz,r=t+n,f=a+.6*n,s=0|Math.max(14,Math.min(24,14+3*G.wSz)),a=2*Math.PI*Math.sqrt((r*r+f*f)/2),n=.9*s,c=Math.max(12,Math.round(a/n)),h=[],d=0;d<c;d++){var p=.6*T+d*(2*Math.PI/c),x=i+Math.cos(p)*r,b=240+Math.sin(p)*f,p=Math.sin(p);h.push({e:IG[d%IG.length].e,x:x,y:b,d:p})}X.font=s+"px serif",h.forEach(function(t){t.d<0&&(X.globalAlpha=.4+.3*(1+t.d),X.fillText(t.e,t.x-s/3,t.y+s/3))}),X.globalAlpha=1,X.save(),X.translate(i,240);n=G.wSz;X.scale(n,n),0<G.wSp&&X.rotate(G.wSp),dScotty(0,0,0,5*Math.abs(Math.sin(4*T))),X.restore(),X.font=s+"px serif",h.forEach(function(t){0<=t.d&&(X.globalAlpha=.7+.3*t.d,X.fillText(t.e,t.x-s/3,t.y+s/3))}),X.globalAlpha=1;n=Math.min(240+22*G.wSz+20,340);1<G.wSz&&(X.font="bold 9px "+F,X.fillStyle="#f39c12",X.fillText("x"+G.wSz.toFixed(1)+" BIG BOY!",i,n)),0<G.wSp&&(X.font="bold 10px "+F,X.fillStyle="#9b59b6",X.fillText("WHEEE!",i+30*Math.sin(6*T),240-22*G.wSz-14)),G.wTr.forEach(function(t){X.globalAlpha=Math.min(1,t.l/15),X.font="22px serif",X.fillText(t.e,t.x,t.y)}),X.globalAlpha=1,X.font="bold 12px "+F,X.fillStyle="#f5dfc0",X.fillText(E_DOG+" Spoil Scotty with your retirement fund! "+E_DOG,W/2,358),X.font="bold 11px "+F,X.fillStyle="#f1c40f",X.fillText(E_MONEY+" $"+G.$$+" remaining",W/2,376);for(var u=W/2-203,g=[{n:"üçñ Bigger!",d:"Grow Scotty"},{n:"üåÄ Spin!",d:"Dizzy pup"},{n:"ü¶¥ Treats!",d:"Toss snacks"}],y=0;y<3;y++){var S=u+138*y,v=25<=G.$$;rr(S,390,130,32,8,v?"rgba(243,156,18,.2)":"rgba(255,255,255,.04)"),v&&(X.strokeStyle="rgba(243,156,18,.3)",X.lineWidth=1,rrS(S,390,130,32,8)),X.font="bold 11px "+F,X.fillStyle=v?"#fff":"#555",X.fillText(g[y].n,65+S,404),X.font="9px "+F,X.fillStyle=v?"#f1c40f":"#444",X.fillText("$25",65+S,417)}rr(W/2-90,440,180,34,12,"#27ae60"),X.font="bold 14px "+F,X.fillStyle="#fff",X.fillText("PLAY AGAIN",W/2,462)}function rr(t,e,l,o,i,a){X.fillStyle=a,X.beginPath(),X.moveTo(t+i,e),X.lineTo(t+l-i,e),X.quadraticCurveTo(t+l,e,t+l,e+i),X.lineTo(t+l,e+o-i),X.quadraticCurveTo(t+l,e+o,t+l-i,e+o),X.lineTo(t+i,e+o),X.quadraticCurveTo(t,e+o,t,e+o-i),X.lineTo(t,e+i),X.quadraticCurveTo(t,e,t+i,e),X.closePath(),X.fill()}function rrS(t,e,l,o,i){X.beginPath(),X.moveTo(t+i,e),X.lineTo(t+l-i,e),X.quadraticCurveTo(t+l,e,t+l,e+i),X.lineTo(t+l,e+o-i),X.quadraticCurveTo(t+l,e+o,t+l-i,e+o),X.lineTo(t+i,e+o),X.quadraticCurveTo(t,e+o,t,e+o-i),X.lineTo(t,e+i),X.quadraticCurveTo(t,e,t+i,e),X.closePath(),X.stroke()}function hRgb(t){return parseInt(t.slice(1,3),16)+","+parseInt(t.slice(3,5),16)+","+parseInt(t.slice(5,7),16)}var isPt=!(scottyImg.src="scotty.svg");function resize(){var t,e,l,o,i=window.innerWidth,a=window.innerHeight;(isPt=1.1*i<a)?(e=window.devicePixelRatio||1,C.width=i*e,C.height=a*e,C.style.width=i+"px",C.style.height=a+"px",C.style.position="absolute",C.style.left="0",C.style.top="0",X.setTransform(e,0,0,e,0,0)):(t=Math.min(window.devicePixelRatio||1,2),(e=BW/BH)<i/a?l=(o=a)*e:o=(l=i)/e,C.width=l*t,C.height=o*t,C.style.width=l+"px",C.style.height=o+"px",C.style.position="absolute",C.style.left=(i-l)/2+"px",C.style.top=(a-o)/2+"px",X.setTransform(l*t/BW,0,0,o*t/BH,0,0),W=BW,H=BH)}function rPt(){var t=window.innerWidth,e=window.innerHeight,l=t/2,o=e/2;C.style.left="0",C.style.top="0",X.fillStyle="#1a0a04",X.fillRect(0,0,t,e);t=Date.now()/1e3,e=.4*Math.sin(1.5*t);X.save(),X.translate(l,o-40),X.rotate(e),X.strokeStyle="#f39c12",X.lineWidth=3,X.beginPath(),X.roundRect(-28,-48,56,96,8),X.stroke(),X.fillStyle="rgba(243,156,18,.15)",X.beginPath(),X.roundRect(-22,-38,44,76,4),X.fill(),X.beginPath(),X.arc(0,40,4,0,2*Math.PI),X.stroke(),X.restore(),X.fillStyle="#f5dfc0",X.textAlign="center",X.font="bold 22px "+F,X.fillText("Rotate to Play!",l,60+o),X.font="14px "+F,X.fillStyle="#b08050",X.fillText("Turn sideways "+E_PHONE,l,88+o);t=1+.08*Math.sin(3*t);X.save(),X.translate(l,130+o),X.scale(t,t),X.font="36px serif",X.fillText(E_POT,0,0),X.restore()}function loop(){if(requestAnimationFrame(loop),T+=dt,isPt)return rPt(),void(tp=!1);update(),render(),tp=!1}window.addEventListener("resize",resize),window.addEventListener("orientationchange",function(){setTimeout(resize,150)}),resize(),requestAnimationFrame(loop);
</script>
</body>
</html>
